(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){e.exports=a(231)},222:function(e,t,a){},226:function(e,t,a){},231:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(36),i=a.n(c),o=a(27),u=a(93),s=a(103),l=a(70),m=a(7),p=a.n(m),d=a(6),h=a(37),f=(a(60),{findLocationByLatLng:function(){var e=Object(h.a)(p.a.mark(function e(t,a){var n,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t,a].join(","),e.next=3,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/search/?lattlong=".concat(n));case 3:if((r=e.sent).ok){e.next=6;break}return e.abrupt("return",{error:{code:r.status}});case 6:return e.next=8,r.json();case 8:return c=e.sent,e.abrupt("return",{data:c});case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),findWeatherbyId:function(){var e=Object(h.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/weather/location/".concat(t,"/"));case 2:if((a=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:a.status}});case 5:return e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",{data:n});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),defaultSearch:function(){var e=Object(h.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://react-assessment-api.herokuapp.com/api/drone");case 2:if((t=e.sent).ok){e.next=5;break}return e.abrupt("return",{error:{code:t.status}});case 5:return e.next=7,t.json();case 7:return a=e.sent,e.abrupt("return",{data:a});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),b="COMMAND/FETCH_WEATHER_FOR_LAT_LNG",g="EVENT/API_ERROR_RECEIVED",E="EVENT/WEATHER_DATA_RECEIVED",j="EVENT/WEATHER_ID_RECEIVED",w="COMMAND/DEFAULT_FETCH_WEATHER",O="EVENT/DEFAULT_WEATHER_DATA_RECEIVED",v=p.a.mark(T),y=p.a.mark(M),x=p.a.mark(_),k=p.a.mark(C);function T(e){var t,a,n,r;return p.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,c.next=3,Object(d.b)(f.findWeatherbyId,t);case 3:if(a=c.sent,n=a.error,r=a.data,!n){c.next=12;break}return c.next=9,Object(d.d)({type:g,code:n.code});case 9:return c.next=11,Object(d.c)();case 11:return c.abrupt("return");case 12:return c.next=14,Object(d.d)({type:E,data:r});case 14:case"end":return c.stop()}},v)}function M(e){var t,a,n,r,c,i;return p.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.latitude,a=e.longitude,o.next=3,Object(d.b)(f.findLocationByLatLng,t,a);case 3:if(n=o.sent,r=n.error,c=n.data,!r){o.next=13;break}return console.log({error:r}),o.next=10,Object(d.d)({type:g,code:r.code});case 10:return o.next=12,Object(d.c)();case 12:return o.abrupt("return");case 13:if(i=!!c[0]&&c[0].woeid){o.next=20;break}return o.next=17,Object(d.d)({type:g});case 17:return o.next=19,Object(d.c)();case 19:return o.abrupt("return");case 20:return o.next=22,Object(d.d)({type:j,id:i});case 22:case"end":return o.stop()}},y)}function _(e){var t,a,n,r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(f.defaultSearch);case 2:if(t=e.sent,a=t.error,n=t.data,!a){e.next=11;break}return e.next=8,Object(d.d)({type:g,code:a.code});case 8:return e.next=10,Object(d.c)();case 10:return e.abrupt("return");case 11:return r=n.data[n.data.length-1],c=n.data,e.next=15,Object(d.d)({type:O,latestUpdate:r,fullDroneReading:c});case 15:case"end":return e.stop()}},x)}function C(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)([Object(d.e)(b,M),Object(d.e)(j,T),Object(d.e)(w,_)]);case 2:case"end":return e.stop()}},k)}var D=[C],R=a(56),W=p.a.mark(I),A=p.a.mark(N);function I(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.b)(R.toast.error,"Error Received: ".concat(e.code));case 2:case"end":return t.stop()}},W)}function N(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(g,I);case 2:case"end":return e.stop()}},A)}var L,F=[N],S=[].concat(Object(l.a)(F),Object(l.a)(D)),V=a(26),Y=a(104),H=a(39),B={loading:!1,weatherId:null,name:"",temperature:"",metric:null,weather_state_name:"",latitude:null,longitude:null,data:{},timestamp:"",accuracy:null,fullDroneReading:[]},G=(L={},Object(V.a)(L,b,function(e,t){return Object(H.a)({},e,{loading:!0})}),Object(V.a)(L,j,function(e,t){return Object(H.a)({},e,{weatherId:t.id})}),Object(V.a)(L,E,function(e,t){var a=t.data;if(!a.consolidated_weather)return e;var n,r=a.consolidated_weather[0],c=r.weather_state_name,i=r.the_temp,o=a.latt_long,u=a.title,s=o.split(","),l=Object(Y.a)(s,2),m=l[0],p=l[1];return Object(H.a)({},e,{loading:!1,latitude:m,longitude:p,temperatureinCelsius:i,temperatureinFahrenheit:(n=i,(9*n/5+32).toFixed(1)),weather_state_name:c,name:u,data:t.data})}),Object(V.a)(L,w,function(e,t){return Object(H.a)({},e)}),Object(V.a)(L,O,function(e,t){var a=t.latestUpdate,n=t.fullDroneReading,r=a.timestamp,c=a.accuracy,i=a.latitude,o=a.longitude,u=a.metric;return Object(H.a)({},e,{timestamp:r,accuracy:c,latitude:i,longitude:o,metric:u,fullDroneReading:n})}),L),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,a=G[t.type];return"undefined"===typeof a?e:a(e,t)},U=a(20),z=a(10),J=a(102),K=a.n(J),q=(a(126),a(25)),X=a.n(q),Z=a(96),$=a.n(Z),Q=a(97),ee=a.n(Q),te=a(17),ae=a(18),ne=a(21),re=a(19),ce=a(22),ie=a(57),oe=a.n(ie),ue=a(95),se=a.n(ue),le=Object(z.withStyles)(function(e){return{root:{background:e.palette.secondary.main},label:{color:e.palette.primary.main}}})(se.a),me=function(e){function t(){return Object(te.a)(this,t),Object(ne.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ae.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.loading,a=e.name,n=e.weather_state_name,c=e.temperatureinFahrenheit;return t?r.a.createElement(oe.a,null):r.a.createElement(le,{label:"Weather in ".concat(a,": ").concat(n," and ").concat(c,"\xb0")})}}]),t}(n.Component),pe=Object(U.b)(function(e,t){var a=e.weather;return{loading:a.loading,name:a.name,weather_state_name:a.weather_state_name,temperatureinFahrenheit:a.temperatureinFahrenheit}},function(e){return{onLoad:function(){return e({type:b,longitude:-95.3698,latitude:29.7604})}}})(me),de=Object(z.withStyles)({grow:{flexGrow:1}})(function(e){var t=e.classes;return r.a.createElement($.a,{position:"static"},r.a.createElement(ee.a,null,r.a.createElement(X.a,{variant:"h6",color:"inherit",className:t.grow},"Ziqing Wang's"," EOG React Visualization Assessment"),r.a.createElement(pe,null)))}),he=Object(z.withStyles)(function(e){return{wrapper:{background:e.palette.background.main,height:"100vh"}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.wrapper},e.children)}),fe=a(67),be=a.n(fe),ge=a(28),Ee=a.n(ge),je=a(98),we=a.n(je),Oe=a(100),ve=a.n(Oe),ye=a(16),xe=a.n(ye),ke=a(99),Te=a.n(ke),Me=a(68),_e=a.n(Me),Ce=function(e){function t(e){var a;return Object(te.a)(this,t),(a=Object(ne.a)(this,Object(re.a)(t).call(this,e))).state={update:0,timer:null},a}return Object(ce.a)(t,e),Object(ae.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad(),this.setState({timer:setInterval(this.props.onLoad,1e3)})}},{key:"randomTimer",value:function(){return[3e3,4e3][Math.floor(2*Math.random())]}},{key:"componentDidUpdate",value:function(e,t){if(this.props.timestamp!==e.timestamp){this.state.timer&&this.setState({timer:clearInterval(this.state.timer)});var a=this.randomTimer();this.setState({update:a/1e3,timer:setInterval(this.props.onLoad,a)})}}},{key:"render",value:function(){var e=this.props.classes,t=this.props,a=t.latitude,n=t.longitude,c=t.metric,i=t.accuracy;return c?r.a.createElement(we.a,{className:e.table},r.a.createElement(Te.a,null,r.a.createElement(_e.a,null,r.a.createElement(xe.a,{align:"center"},"Latitude"),r.a.createElement(xe.a,{align:"center"},"Logitude"),r.a.createElement(xe.a,{align:"center"},"Temperature (F\xb0)"),r.a.createElement(xe.a,{align:"center"},"Last Updated"),r.a.createElement(xe.a,{align:"center"},"Accuracy"))),r.a.createElement(ve.a,null,r.a.createElement(_e.a,null,r.a.createElement(xe.a,{align:"center",component:"th",scope:"row"},a),r.a.createElement(xe.a,{align:"center"},n),r.a.createElement(xe.a,{align:"center"},c),r.a.createElement(xe.a,{align:"center"},this.state.update," seconds ago"),r.a.createElement(xe.a,{align:"center"},Number(i).toFixed(5),"%")))):r.a.createElement(oe.a,null)}}]),t}(r.a.Component);Ce=Object(z.withStyles)(function(e){return{table:{minWidth:700}}})(Ce);var De=Object(U.b)(function(e,t){var a=e.weather;return{latitude:a.latitude,longitude:a.longitude,metric:a.metric,timestamp:a.timestamp,accuracy:a.accuracy}},function(e){return{onLoad:function(){return e({type:w})}}})(Ce),Re=a(45),We=(a(222),{width:"450px",height:"400px"}),Ae=function(e){function t(e){var a;return Object(te.a)(this,t),(a=Object(ne.a)(this,Object(re.a)(t).call(this,e))).onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},a.onMapClicked=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.onClose=function(e){a.state.showingInfoWindow&&a.setState({showingInfoWindow:!1,activeMarker:null})},a.state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},a}return Object(ce.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props,a=t.latitude,n=t.longitude,c=t.metric,i=t.accuracy;return r.a.createElement("div",{className:"mapWrapper"},r.a.createElement(X.a,{component:"h6",variant:"h5",className:e.marginTop},"Real-time drone position"),r.a.createElement(Re.Map,{google:this.props.google,onClick:this.onMapClicked,zoom:4,style:We,initialCenter:{lat:29.7604,lng:-95.3698}},c?r.a.createElement(Re.Marker,{position:{lat:a,lng:n},onClick:this.onMarkerClick,name:"Current Drone reading"}):null,r.a.createElement(Re.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,onClose:this.onClose},r.a.createElement("div",{className:"informationWindow"},r.a.createElement("p",null,r.a.createElement("strong",null,"Lat:  "),a),r.a.createElement("p",null,r.a.createElement("strong",null,"Long:  "),n),r.a.createElement("p",null,r.a.createElement("strong",null,"Temperature:  "),c," F\xb0"),r.a.createElement("p",null,r.a.createElement("strong",null,"Accuracy:  "),Number(i).toFixed(5),"%")))))}}]),t}(r.a.Component);Ae=Object(z.withStyles)(function(e){return{marginTop:{marginTop:"20px",textAlign:"left",width:"80%"}}})(Ae),Ae=Object(Re.GoogleApiWrapper)(function(e){return{apiKey:"AIzaSyDl0yjP5KBaFCGWKAsPJn2eBMjvRlHGTdY"}})(Ae);var Ie=Object(U.b)(function(e,t){var a=e.weather;return{latitude:a.latitude,longitude:a.longitude,metric:a.metric,timestamp:a.timestamp,accuracy:a.accuracy}})(Ae),Ne=a(69),Le=a.n(Ne),Fe=a(101),Se=a.n(Fe),Ve=(a(226),function(e){function t(){return Object(te.a)(this,t),Object(ne.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props.fullDroneReading,a=t.map(function(e){return[Le()(e.timestamp).format("MMMM Do YYYY, h:mm:ss a"),Number(Number(e.metric).toFixed(4))]}),n={chart:{type:"line"},title:"",xAxis:{tickInterval:75,categories:t.map(function(e){return Le()(e.timestamp).format("MMMM Do YYYY, h:mm:ss a")})},yAxis:{title:{text:"Temperature (F\xb0)"},labels:{formatter:function(){return this.value+"\xb0"}}},tooltip:{crosshairs:!0,shared:!0},plotOptions:{line:{marker:{radius:4,lineColor:"#666666",lineWidth:1},animation:!1}},series:[{name:"Drone",data:a}]};return r.a.createElement("div",{className:"droneChart"},r.a.createElement(X.a,{component:"h6",variant:"h5",className:e.marginTop},"Drone temperature"),r.a.createElement(Se.a,{config:n}))}}]),t}(r.a.Component));Ve=Object(z.withStyles)(function(e){return{marginTop:{marginTop:"20px",width:"80%"}}})(Ve);var Ye=Object(U.b)(function(e,t){return{fullDroneReading:e.weather.fullDroneReading}})(Ve),He=function(e){function t(){return Object(te.a)(this,t),Object(ne.a)(this,Object(re.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(ae.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Ee.a,{container:!0,spacing:24},r.a.createElement(Ee.a,{item:!0,xs:4}),r.a.createElement(Ee.a,{container:!0,item:!0,xs:12,justify:"center"},r.a.createElement(X.a,{component:"h6",variant:"h5",className:e.marginTop},"Real-time drone reading"),r.a.createElement(be.a,{className:e.root},r.a.createElement(De,null))),r.a.createElement(Ee.a,{container:!0,spacing:0,justify:"space-between"},r.a.createElement(Ee.a,{item:!0,xs:6},r.a.createElement(Ie,null)),r.a.createElement(Ee.a,{item:!0,xs:6},r.a.createElement(Ye,null)))))}}]),t}(r.a.Component),Be=He=Object(z.withStyles)(function(e){return{root:{width:"80%",overflowX:"auto",marginTop:"10px"},marginTop:{marginTop:"10px",width:"80%"}}})(He),Ge=function(){var e=Object(o.combineReducers)({weather:P}),t=Object(u.composeWithDevTools)({}),a=Object(s.a)(),n=Object(o.applyMiddleware)(a),r=Object(o.createStore)(e,t(n));return S.forEach(a.run),r}(),Pe=Object(z.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"rgb(39,49,66)"},secondary:{main:"rgb(197,208,222)"},background:{main:"rgb(226,231,238)"}}}),Ue=function(e){return r.a.createElement(z.MuiThemeProvider,{theme:Pe},r.a.createElement(K.a,null),r.a.createElement(U.a,{store:Ge},r.a.createElement(he,null,r.a.createElement(de,null),r.a.createElement(Be,null),r.a.createElement(R.ToastContainer,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[105,2,1]]]);
//# sourceMappingURL=main.87bc8c80.chunk.js.map